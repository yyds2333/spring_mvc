<!DOCTYPE>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>列表</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="/static/js/jquery-3.4.1/jquery-3.4.1.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="/static/js/bootstrap/bootstrap.min.js"></script>
    <script>
        $(function () {
            console.log("==========")
            loadData();
            console.log("----------")
        })
        let pageTxt='';
        function loadData() {
            $.get("/ajax/getAll",{},function (data) {
                let sum = 0;
                for (const standardsKey of data.standards) {
                    sum++;
                    pageTxt+=`
                    <tr>
                        <td><input type="checkbox" name="delId" value="`+sum+`">
                        </td>
                        <td>${standardsKey.stdNum}</td>
                        <td>${standardsKey.zhname}</td>
                        <td>${standardsKey.version}</td>
                        <td>${toStringDate(new Date(standardsKey.releaseDate))}</td>
                        <td>${toStringDate(new Date(standardsKey.implDate))}</td>
                        <td><a href="#">下载</a>
                        <a href="/list/update?id=${standardsKey.id}">修改</a></td>
                    </tr>
                    `
                }
                $("tbody:eq(0)").html(pageTxt);
            },"JSON")
        }
        /*重写tolocaleString方法*/
        function toStringDate(date) {
            return date.getFullYear() + "年" + (date.getMonth() + 1) + "月" + date.getDate() + "日 ";
        }
    </script>
    <style>
        tr{
            width:1000px;
            height: 50px;
        }
        td{
            margin: auto;
            text-align: center;
        }
        th{
            margin: auto;
            text-align: center;
        }

    </style>
</head>

<body>
<div  style="text-align:center;margin: auto;padding: 20px 20px 20px 20px;width: 100%">
<h3>标准信息列表</h3>
<form id="operForm" action="index" method="get">
    <input type="text" name="text" value="">
    <button type="submit">提交检索</button>
    <button type="button" onclick="location.href='/list/edit'">新增标准</button>
</form>
<form action="delete" method="post">
    <button id="btnDel">删除标准</button>

    <table border="1"  style="margin: auto;padding: 20px 20px 20px 20px;width:800px">
        <thead>
        <tr>
            <th><input type="checkbox" id="checkAll" onclick="checkALl()"></th>
            <th>标准号</th>
            <th>中文名称</th>
            <th>版本</th>
            <th>发布日期</th>
            <th>实施日期</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</form>
<a href="http://localhost:8080/index?pageNum=1&amp;text=">首页</a>
<a href="http://localhost:8080/index?pageNum=0&amp;text=">上一页</a>
<a href="http://localhost:8080/index?pageNum=2&amp;text=">下一页</a>
<a href="http://localhost:8080/index?pageNum=2&amp;text=">末页</a>


</div>
</body>
</html>